webpackJsonp([3],{"3KxK":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("oqQY"),i=a.n(s),o={name:"Task",components:{SearchBar:a("TEG0").a},data:function(){return{dialogEditFormVisible:!1,pagesize:10,currentPage:1,tasks:[],sizes:0,isSear:0,form:{id:"",taskId:"",stage:"",status:"",intendedVehicle:"",takeLocation:"",deliveryLocation:"",project:"",createTime:""}}},mounted:function(){this.loadTasks()},methods:{handleSizeChange:function(t){this.pagesize=t,0===this.isSear&&this.loadTasks()},handleCurrentChange:function(t){this.currentPage=t,0===this.isSear&&this.loadTasks()},loadTasks:function(){var t=this;this.tasks=[];for(var e=0;e<this.currentPage;e++)this.$axios.get("/web/task/list?page="+e+"&size="+this.pagesize,{}).then(function(e){t.tasks=t.tasks.concat(e.data.data.content),t.sizes=e.data.data.totalElements})},deleteTasks:function(t){var e=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$axios.delete("/api/task/delete?id="+t.id,{}).then(function(a){e.loadTasks(),e.$emit("deleteTasks",t)})}).catch(function(){e.$message({type:"info",message:"已取消"})})},clear:function(){this.form={id:"",taskId:"",stage:"",status:"",intendedVehicle:"",takeLocation:"",deliveryLocation:"",project:""},this.dialogEditFormVisible=!1},show:function(t){this.dialogEditFormVisible=!0,this.form={id:t.id,taskId:t.taskId,stage:t.stage,status:t.status,intendedVehicle:t.intendedVehicle,takeLocation:t.takeLocation,deliveryLocation:t.deliveryLocation,project:t.project,createTime:t.createTime}},editTasks:function(){var t=this,e=i()((new Date).getTime()-864e5).format("YYYY-MM-DD HH:mm:ss");this.$axios.post("/api/task/edit",{id:this.form.id,taskId:this.form.taskId,stage:this.form.stage,status:this.form.status,intendedVehicle:this.form.intendedVehicle,takeLocation:this.form.takeLocation,deliveryLocation:this.form.deliveryLocation,project:this.form.project,createTime:this.form.createTime,updateTime:e}).then(function(e){e&&200===e.data.code&&t.$emit("editTasks",row),t.loadTasks(),t.clear()})},searchResult:function(){var t=this;""!=this.$refs.searchBar.keywords?this.$axios.get("/api/task/find?taskId="+this.$refs.searchBar.keywords,{}).then(function(e){t.tasks=e.data.data,t.sizes=t.tasks.length}):(this.isSear=0,this.loadTasks())},forStatus:function(t,e){return 10==t.status&&(t.status="进行中"),20==t.status&&(t.status="已完成"),t.status}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"task-div-one"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("任务管理")])],1)],1),t._v(" "),a("div",{staticClass:"task-div-two"},[a("el-row",[a("search-bar",{ref:"searchBar",staticClass:"task-search-bar",on:{onSearch:t.searchResult}})],1),t._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tasks.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),border:"",height:"735px"}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"taskId",label:"task_id",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stage",label:"task阶段",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"任务状态",width:"200",formatter:t.forStatus}}),t._v(" "),a("el-table-column",{attrs:{prop:"intendedVehicle",label:"task分配车辆",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"takeLocation",label:"确定取货库位",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"deliveryLocation",label:"确定放货库位",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"project",label:"工程类型",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.show(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.deleteTasks(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.sizes},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),a("div",[a("el-dialog",{attrs:{title:"修改信息",visible:t.dialogEditFormVisible},on:{"update:visible":function(e){t.dialogEditFormVisible=e}}},[a("el-form",{attrs:{"v-model":t.form}},[a("el-form-item",{attrs:{label:"task_id"}},[a("el-input",{model:{value:t.form.taskId,callback:function(e){t.$set(t.form,"taskId",e)},expression:"form.taskId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"task阶段"}},[a("el-input",{model:{value:t.form.stage,callback:function(e){t.$set(t.form,"stage",e)},expression:"form.stage"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"任务状态"}},[a("el-input",{model:{value:t.form.status,callback:function(e){t.$set(t.form,"status",e)},expression:"form.status"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"task分配车辆"}},[a("el-input",{model:{value:t.form.intendedVehicle,callback:function(e){t.$set(t.form,"intendedVehicle",e)},expression:"form.intendedVehicle"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确定取货库位"}},[a("el-input",{model:{value:t.form.takeLocation,callback:function(e){t.$set(t.form,"takeLocation",e)},expression:"form.takeLocation"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"确定放货库位"}},[a("el-input",{model:{value:t.form.deliveryLocation,callback:function(e){t.$set(t.form,"deliveryLocation",e)},expression:"form.deliveryLocation"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"工程类型"}},[a("el-input",{model:{value:t.form.project,callback:function(e){t.$set(t.form,"project",e)},expression:"form.project"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.clear}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.editTasks}},[t._v("修改")])],1)],1)],1)])},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("GzqO")},null,null);e.default=l.exports},GzqO:function(t,e){}});
//# sourceMappingURL=3.451be7b7639e2a639bff.js.map