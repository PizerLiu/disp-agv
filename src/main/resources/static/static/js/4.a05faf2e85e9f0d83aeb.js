webpackJsonp([4],{"E4+3":function(t,a){},XBez:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("oqQY"),i=e.n(s),l={name:"WayBillTask",components:{SearchBar:e("TEG0").a},data:function(){return{dialogEditFormVisible:!1,pagesize:10,currentPage:1,wayBillTask:[],sizes:0,isSear:0,form:{id:"",taskId:"",stage:"",wayBillTaskId:"",status:"",param:"",createTime:""}}},mounted:function(){this.loadWayBillTask()},methods:{loadWayBillTask:function(){var t=this;this.wayBillTask=[];for(var a=0;a<this.currentPage;a++)this.$axios.get("/web/waybilltask/list?page="+a+"&size="+this.pagesize,{}).then(function(a){t.wayBillTask=t.wayBillTask.concat(a.data.data.content),t.sizes=a.data.data.totalElements})},deleteWayBillTask:function(t){var a=this;this.$confirm("确认删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.$axios.delete("/web/waybilltask/delete?id="+t.id,{}).then(function(e){a.loadWayBillTask(),a.$emit("deleteLocations",t)})}).catch(function(){a.$message({type:"info",message:"已取消"})})},show:function(t){this.dialogEditFormVisible=!0,this.form={id:t.id,taskId:t.taskId,stage:t.stage,wayBillTaskId:t.wayBillTaskId,status:t.status,param:t.param,createTime:t.createTime}},clear:function(){this.form={id:"",taskId:"",stage:"",wayBillTaskId:"",status:"",param:""},this.dialogEditFormVisible=!1},editWayBillTask:function(){var t=this,a=i()((new Date).getTime()-864e5).format("YYYY-MM-DD HH:mm:ss");this.$axios.post("/web/waybilltask/addorupdata",{id:this.form.id,taskId:this.form.taskId,stage:this.form.stage,wayBillTaskId:this.form.wayBillTaskId,status:this.form.status,param:this.form.param,createTime:this.form.createTime,updateTime:a}).then(function(a){a&&200===a.data.code&&t.$emit("editWayBillTask"),t.loadWayBillTask(),t.clear()})},searchResult:function(){var t=this;""!=this.$refs.searchBar.keywords?this.$axios.get("/web/waybilltask/find?taskId="+this.$refs.searchBar.keywords,{}).then(function(a){t.wayBillTask=a.data.data,t.sizes=t.wayBillTask.length}):(this.isSear=0,this.loadWayBillTask())},handleSizeChange:function(t){this.pagesize=t,0===this.isSear&&this.loadWayBillTask()},handleCurrentChange:function(t){this.currentPage=t,0===this.isSear&&this.loadWayBillTask()},forStatus:function(t,a){return 10==t.status&&(t.status="进行中"),20==t.status&&(t.status="已完成"),t.status}}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"way-div-one"},[e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",[t._v("首页")]),t._v(" "),e("el-breadcrumb-item",[t._v("任务条例")])],1)],1),t._v(" "),e("div",{staticClass:"way-div-two"},[e("el-row",[e("search-bar",{ref:"searchBar",staticClass:"way-search-bar",on:{onSearch:t.searchResult}})],1),t._v(" "),e("div",[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.wayBillTask.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),border:"",height:"735px"}},[e("el-table-column",{attrs:{prop:"id",label:"ID",width:"150"}}),t._v(" "),e("el-table-column",{attrs:{prop:"taskId",label:"task-id",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{prop:"stage",label:"task阶段",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{prop:"wayBillTaskId",label:"运单id",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{prop:"status",label:"运单任务状态",width:"200",formatter:t.forStatus}}),t._v(" "),e("el-table-column",{attrs:{prop:"param",label:"运单参数",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{prop:"updateTime",label:"更新时间",width:"200"}}),t._v(" "),e("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.show(a.row)}}},[t._v("修改")]),t._v(" "),e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.deleteWayBillTask(a.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),e("div",[e("el-pagination",{attrs:{"current-page":t.currentPage,"page-sizes":[10,15,20],"page-size":10,layout:"total, sizes, prev, pager, next, jumper",total:t.sizes},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1),t._v(" "),e("div",[e("el-dialog",{attrs:{title:"修改信息",visible:t.dialogEditFormVisible},on:{"update:visible":function(a){t.dialogEditFormVisible=a}}},[e("el-form",{attrs:{"v-model":t.form}},[e("el-form-item",{attrs:{label:"task-id"}},[e("el-input",{model:{value:t.form.taskId,callback:function(a){t.$set(t.form,"taskId",a)},expression:"form.taskId"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"task阶段"}},[e("el-input",{model:{value:t.form.stage,callback:function(a){t.$set(t.form,"stage",a)},expression:"form.stage"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"运单id"}},[e("el-input",{model:{value:t.form.wayBillTaskId,callback:function(a){t.$set(t.form,"wayBillTaskId",a)},expression:"form.wayBillTaskId"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"运单任务状态"}},[e("el-input",{model:{value:t.form.status,callback:function(a){t.$set(t.form,"status",a)},expression:"form.status"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"运单参数"}},[e("el-input",{model:{value:t.form.param,callback:function(a){t.$set(t.form,"param",a)},expression:"form.param"}})],1)],1),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.clear}},[t._v("取 消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:t.editWayBillTask}},[t._v("修改")])],1)],1)],1)])},staticRenderFns:[]};var o=e("VU/8")(l,r,!1,function(t){e("E4+3")},null,null);a.default=o.exports}});
//# sourceMappingURL=4.a05faf2e85e9f0d83aeb.js.map